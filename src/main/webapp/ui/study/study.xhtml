<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	<h:form id="form">
	<div class="Container100">

		<div class="TexAlLeft">
			   <h2 class="BigTopic" style="padding-bottom: 0px">
					Study
				</h2>
				<h:panelGrid columns="2" cellpadding="5" id="addStudyPanel">
					<p:outputLabel value="Name *" />
					<p:outputPanel>
						<p:inputText required="true" style="width:160px"
							value="#{studyForm.sessionModel.model.name}">
						</p:inputText>
					</p:outputPanel>
					<p:outputLabel   value="Study Type: *" />
					<p:outputPanel>
						<p:selectOneMenu id="studyType"  value="#{studyForm.sessionModel.model.studyType}" converter="omnifaces.SelectItemsIndexConverter" disabled="#{studyForm.sessionModel.editMode}" style="width:125px" required="true" >
							<f:selectItem itemLabel="Select One" itemValue="#{null}"  />
							<f:selectItems value="#{studyForm.studytypes}" var="studyType" itemLabel="#{studyType.name}"  itemValue="#{studyType}" />
						</p:selectOneMenu>
					</p:outputPanel>
					<div class="Container50 TexAlCenter">
						<p:outputPanel styleClass="studybutton">
							<p:commandButton value="Save" action="#{studyForm.save()}"
								ajax="true" update="form, growl,btnRun"
								rendered="#{studyForm.sessionModel.newMode}"/>
								<p:commandButton value="Update" action="#{studyForm.save()}"
								ajax="true" update="form, growl"
								rendered="#{studyForm.sessionModel.editMode}" />
								<p:commandButton id="btnRun" value="Add Run" action="#{runForm.viewNewOne}" 
								ajax="true" update="mainContent,form"  disabled="#{!studyForm.isDisable()}">
								 <f:setPropertyActionListener target="#{runForm.study}" value="#{studyForm.sessionModel.model}" />
								</p:commandButton>
								
						</p:outputPanel>
					</div>
				</h:panelGrid>
				<h2 class="BigTopic" style="padding-bottom: 0px">
					Runs
				</h2>
				<div class="Container100 Responsive100"
					style="background: transparent">
					<p:dataTable id="rundata" var="run"
						value="#{studyForm.sessionModel.model.runs}" rows="5"
						paginator="true"
						paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						rowsPerPageTemplate="5,10,15" reflow="true"
						styleClass="graypanel Fs20">
						<p:column headerText="Id">
							<h:outputText value="#{run.id}" />
						</p:column>
						<p:column headerText="Date">
							<h:outputText value="#{run.createDate}">
								<f:convertDateTime pattern="dd-MMM-yy HH:mm"></f:convertDateTime>
							</h:outputText>
							
						</p:column>
						<p:column headerText="Plates">
							<h:outputText value="#{run.plates.size()}" />
						</p:column>
						<p:column>
							<p:commandLink id="viewRun" update="form,growl"
								actionListener="#{runForm.viewOne(run)}">
								<h:outputText value="Run" />
							</p:commandLink>
						</p:column>

					</p:dataTable>
				</div>

			</div>
	</div>
	</h:form>
</ui:composition>